<div class="auth-registration">
  <p-card class="auth-card">
    <ng-template #title> <span class="auth-card-title">Sign up</span> </ng-template>
    <ng-template #content>
      <form [formGroup]="form" class="flex flex-col gap-4">
        <!-- Username -->
        <div class="flex flex-col gap-1 pb-6 relative">
          <p-iconfield>
            <p-floatlabel variant="on">
              <input
                pInputText
                formControlName="username"
                id="on_username"
                aria-label="username"
                fluid
                (blur)="form.controls.username.markAsDirty()"
              />
              <label for="on_email">Username</label>
            </p-floatlabel>
            <p-inputicon styleClass="pi pi-user" />
          </p-iconfield>
          <p-message
            *ngIf="form.controls.username.touched && form.controls.username.errors?.['required']"
            severity="error"
            variant="simple"
            size="small"
            class="ml-3 absolute bottom-0"
          >
            Username is required
          </p-message>
          <p-message
            *ngIf="form.controls.username.touched && form.controls.username.errors?.['minlength']"
            severity="error"
            variant="simple"
            size="small"
            class="ml-3 absolute bottom-0"
          >
            Username must be at least 3 chars long
          </p-message>
        </div>

        <!-- Email -->
        <div class="flex flex-col gap-1 pb-6 relative">
          <p-iconfield>
            <p-floatlabel variant="on">
              <input
                pInputText
                formControlName="email"
                id="on_email"
                aria-label="email"
                fluid
                (blur)="form.controls.email.markAsDirty()"
              />
              <label for="on_email">Email</label>
            </p-floatlabel>
            <p-inputicon styleClass="pi pi-envelope" />
          </p-iconfield>
          <p-message
            *ngIf="form.controls.email.touched && form.controls.email.errors?.['required']"
            severity="error"
            variant="simple"
            size="small"
            class="ml-3 absolute bottom-0"
          >
            Email is required
          </p-message>
          <p-message
            *ngIf="form.controls.email.touched && form.controls.email.errors?.['email']"
            severity="error"
            variant="simple"
            size="small"
            class="ml-3 absolute bottom-0"
          >
            Please enter a valid email address
          </p-message>
        </div>

        <!-- Password -->
        <div class="flex flex-col gap-1 pb-6 relative">
          <p-iconfield>
            <p-floatlabel variant="on">
              <input
                pInputText
                formControlName="password"
                id="on_password"
                aria-label="Password"
                type="password"
                fluid
                (blur)="form.controls.password.markAsDirty()"
              />
              <label for="on_password">Password</label>
            </p-floatlabel>
            <p-inputicon styleClass="pi pi-key" />
          </p-iconfield>
          <p-message
            *ngIf="form.controls.password.touched && form.controls.password.errors?.['required']"
            severity="error"
            variant="simple"
            size="small"
            class="ml-3 absolute bottom-0"
          >
            Password is required
          </p-message>
          <p-message
            *ngIf="form.controls.password.touched && form.controls.password.errors?.['minlength']"
            severity="error"
            variant="simple"
            size="small"
            class="ml-3 absolute bottom-0"
          >
            Password must be at least 8 chars long
          </p-message>
        </div>

        <!-- Confirm password -->
        <div class="flex flex-col gap-1 pb-6 relative">
          <p-iconfield>
            <p-floatlabel variant="on">
              <input
                pInputText
                formControlName="confirmPassword"
                id="on_confirm_password"
                aria-label="Confirm password"
                type="password"
                fluid
                (blur)="form.controls.confirmPassword.markAsDirty()"
              />
              <label for="on_confirm_password">Confirm password</label>
            </p-floatlabel>
            <p-inputicon styleClass="pi pi-key" />
          </p-iconfield>
          <p-message
            *ngIf="form.controls.confirmPassword.touched && form.controls.confirmPassword.errors?.['required']"
            severity="error"
            variant="simple"
            size="small"
            class="ml-3 absolute bottom-0"
          >
            Confirm password is required
          </p-message>
          <p-message
            *ngIf="form.controls.confirmPassword.touched && form.controls.confirmPassword.errors?.['passwordsMismatch']"
            severity="error"
            variant="simple"
            size="small"
            class="ml-3 absolute bottom-0"
          >
            Passwords do not match
          </p-message>
        </div>
      </form>
    </ng-template>

    <ng-template #footer>
      <div class="flex flex-col gap-y-16 mt-6">
        <button
          label="Sign up"
          pRipple
          pButton
          [raised]="true"
          (click)="onSubmit()"
          styleClass="w-100"
          class="w-full"
        ></button>
        <div class="flex flex-col justify-center items-center">
          <p>Already have an account?</p>
          <p-button label="Log in!" [link]="true" routerLink="/auth/login" />
        </div>
      </div>
    </ng-template>
  </p-card>
</div>
